{% extends 'layout.html' %}
{% block body %}

<h2>Your drive key: {{ key }}</h2>

{% for song in songs %}
    <div class='row'>
        <div class="card-panel z-depth-1 driverfy-song-card">
            <div class="row valign-wrapper">
                <div class='col s2'>
                    <img src="{{ song['track']['album']['images'][2]['url'] }}" class="responsive-img">
                </div>
                <div class='col s10'>
                    <span class='white-text'>
                        {{ song['track']['name'] }}
                    </span>
                    <span class='grey-text'>
                        {{ song['track']['artists']|map(attribute='name')|join(' | ') }}
                    </span>
                </div>
            </div>
        </div>
    </div>
{% endfor %}
{% endblock %}

{%if search_result %}
    <div class='row'>
        <div class="col s12">
            <div class="toc-wrapper">
                <div class='col s2'>
                    <img src="{{ search_result['album']['images'][2]['url'] }}" class="responsive-img">
                </div>
                <div class='col s10'>
                    <span class='white-text'>
                        {{ search_result['name'] }}
                    </span>
                    <span class='grey-text'>
                        {{ song['artists']|map(attribute='name')|join(' | ') }}
                    </span>
                </div>
            </div>
        </div>
    </div>
{% else %}
    <div class='row'>
        <div class='col s2'></div>
        <div class='col s8'>
            <form method='post' action='/search'>
                <div class='input-field'>
                    {{ render_field(form.search_field) }}
                </div>
                <div class='input-field'>
                    <button class="btn btn-large waves-effect waves-light" type="submit" name="action">Search
                        <i class="material-icons right">send</i>
                    </button>
                </div>
            </form>
        </div>
        </div>
    </div>

<script type="text/javascript">
$(document).ready(function() {
  $('.toc-wrapper').pushpin({
    top: 0
  });
  $('.scrollspy').scrollSpy();
});
</script>
